System.register("chunks:///_virtual/BoardOrientation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(t){var r,e,o,n,i,a,s,c;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,n=t.resources,i=t.SpriteFrame,a=t.Sprite,s=t.Component},function(t){c=t.BoardState}],execute:function(){var p;e._RF.push({},"fed02B6CrxPhbL/r5Rt2MFZ","BoardOrientation",void 0);var u=o.ccclass;o.property,t("BoardOrientation",u("BoardOrientation")(p=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var o=e.prototype;return o.start=function(){c.boardCenter=this.node.getWorldPosition().y},o.update=function(t){var r=this;c.disable||(c.flipped?n.load("art/chessboardFlipped/spriteFrame",i,(function(t,e){r.getComponent(a).spriteFrame=e})):n.load("art/chessboard/spriteFrame",i,(function(t,e){r.getComponent(a).spriteFrame=e})))},e}(s))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/BoardSetup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(t){var e,o,n,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component},function(t){a=t.BoardState}],execute:function(){var i;o._RF.push({},"1c86fDt2AlP8ZSQ84zyvc/V","BoardSetup",void 0);var u=n.ccclass;n.property,t("BoardSetup",u("BoardSetup")(i=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){},n.startGame=function(){a.newGame=!0,a.newBoard()},n.startFlippedGame=function(){a.newGame=!0,a.newFlippedBoard()},n.flipBoard=function(){-1e3==a.promoting.x&&(a.flip=!0,a.flipBoard())},n.update=function(t){},o}(r))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/BoardState.ts",["cc","./PieceRules.ts"],(function(t){var i,s,e;return{setters:[function(t){i=t.cclegacy,s=t.Vec3},function(t){e=t.PieceRules}],execute:function(){i._RF.push({},"4fe3au7FyBKNrywd1gVRO1M","BoardState",void 0),t("BoardState",{turn:1,tileSize:80,board:new Array,whiteKing:new Array,blackKing:new Array,lastPosition:new s,topEdge:280,bottomEdge:-280,leftEdge:-120,rightEdge:440,boardCenter:0,moves:0,justMoved:!1,flip:!1,flipped:!1,newGame:!1,castlingRights:new Array,justCastled:new Array,enPassant:[-1,-1],justPassed:[-1,-1],promoting:new s(-1e3,-1e3,0),piecePromoted:0,nextBotMove:[[-1,-1],[-1,-1]],gameOver:!1,disable:!0,initialize:function(){for(var t=0;t<8;t++){for(var i=[],s=0;s<8;s++)i.push(0);this.board.push(i)}for(var e=0;e<4;e++)this.castlingRights.push(!0),this.justCastled.push(!1)},convertCoordinates:function(t){return[(this.topEdge-t.y)/this.tileSize,(t.x-this.leftEdge)/this.tileSize]},convertUIPosition:function(t){return new s(this.leftEdge+this.tileSize*t[1],this.topEdge-this.tileSize*t[0],0)},setBoard:function(t,i){0!=i.x&&(this.board[this.convertCoordinates(i)[0]][this.convertCoordinates(i)[1]]=t)},newBoard:function(){this.turn=1,this.board[0]=[-5,-2,-3,-8,-9,-3,-2,-5],this.board[1]=[-1,-1,-1,-1,-1,-1,-1,-1];for(var t=2;t<6;t++)this.board[t]=[0,0,0,0,0,0,0,0];this.board[6]=[1,1,1,1,1,1,1,1],this.board[7]=[5,2,3,8,9,3,2,5],this.whiteKing=[7,4],this.blackKing=[0,4],this.flipped=!1,this.castlingRights=[!0,!0,!0,!0],this.justCastled=[!1,!1,!1,!1],this.enPassant=[-1,-1],this.justPassed=[-1,-1],this.promoting=new s(-1e3,-1e3,0),this.piecePromoted=0,this.moves=0,this.gameOver=!1,this.nextBotMove=[[-1,-1],[-1,-1]]},newFlippedBoard:function(){this.turn=1,this.board[7]=[-5,-2,-3,-9,-8,-3,-2,-5],this.board[6]=[-1,-1,-1,-1,-1,-1,-1,-1];for(var t=2;t<6;t++)this.board[t]=[0,0,0,0,0,0,0,0];this.board[1]=[1,1,1,1,1,1,1,1],this.board[0]=[5,2,3,9,8,3,2,5],this.whiteKing=[0,3],this.blackKing=[7,3],this.flipped=!0,this.castlingRights=[!0,!0,!0,!0],this.justCastled=[!1,!1,!1,!1],this.enPassant=[-1,-1],this.justPassed=[-1,-1],this.promoting=new s(-1e3,-1e3,0),this.piecePromoted=0,this.moves=0,this.gameOver=!1,this.nextBotMove=[[-1,-1],[-1,-1]]},flipBoard:function(){for(var t=0;t<4;t++){var i=[this.board[7-t],this.board[t]];this.board[t]=i[0],this.board[7-t]=i[1],this.board[t].reverse(),this.board[7-t].reverse()}this.whiteKing[0]=7-this.whiteKing[0],this.whiteKing[1]=7-this.whiteKing[1],this.blackKing[0]=7-this.blackKing[0],this.blackKing[1]=7-this.blackKing[1],this.enPassant[0]>-1&&(this.enPassant[0]=7-this.enPassant[0],this.enPassant[1]=7-this.enPassant[1])},isValidMove:function(t,i,s){if(s.x<this.leftEdge||s.x>this.rightEdge)return!1;if(s.y<this.bottomEdge||s.y>this.topEdge)return!1;if(i.x==s.x&&i.y==s.y)return!1;if(this.turn*t<0)return!1;if(this.board[this.convertCoordinates(s)[0]][this.convertCoordinates(s)[1]]*t>0)return!1;switch(Math.abs(t)){case 9:if(!e.isReachableByKing(this.board,this.convertCoordinates(i),this.convertCoordinates(s),this.castlingRights,this.flipped))return!1;break;case 8:if(!e.isReachableByQueen(this.board,this.convertCoordinates(i),this.convertCoordinates(s)))return!1;break;case 5:if(!e.isReachableByRook(this.board,this.convertCoordinates(i),this.convertCoordinates(s)))return!1;break;case 3:if(!e.isReachableByBishop(this.board,this.convertCoordinates(i),this.convertCoordinates(s)))return!1;break;case 2:if(!e.isReachableByKnight(this.convertCoordinates(i),this.convertCoordinates(s)))return!1;break;case 1:if(!e.isReachableByPawn(this.board,this.convertCoordinates(i),this.convertCoordinates(s),this.flipped)){if(this.flipped){if(1!=Math.abs(this.convertCoordinates(i)[1]-this.convertCoordinates(s)[1]))return!1;if(this.convertCoordinates(i)[0]+t!=this.convertCoordinates(s)[0])return!1;if(this.convertCoordinates(s)[0]-t!=this.enPassant[0]||this.convertCoordinates(s)[1]!=this.enPassant[1])return!1}else{if(1!=Math.abs(this.convertCoordinates(i)[1]-this.convertCoordinates(s)[1]))return!1;if(this.convertCoordinates(i)[0]-t!=this.convertCoordinates(s)[0])return!1;if(this.convertCoordinates(s)[0]+t!=this.enPassant[0]||this.convertCoordinates(s)[1]!=this.enPassant[1])return!1}if(this.board[this.enPassant[0]][this.enPassant[1]]=0,t>0){if(!e.isKingSafe(e.pseudoBoard(this.board,this.convertCoordinates(i),this.convertCoordinates(s)),this.whiteKing,this.flipped))return this.board[this.enPassant[0]][this.enPassant[1]]=-t,!1}else if(!e.isKingSafe(e.pseudoBoard(this.board,this.convertCoordinates(i),this.convertCoordinates(s)),this.blackKing,this.flipped))return this.board[this.enPassant[0]][this.enPassant[1]]=-t,!1;this.board[this.enPassant[0]][this.enPassant[1]]=-t}break;default:return!1}if(t>0){if(t<9){if(!e.isKingSafe(e.pseudoBoard(this.board,this.convertCoordinates(i),this.convertCoordinates(s)),this.whiteKing,this.flipped))return!1}else if(!e.isKingSafe(e.pseudoBoard(this.board,this.convertCoordinates(i),this.convertCoordinates(s)),this.convertCoordinates(s),this.flipped))return!1}else if(t>-9){if(!e.isKingSafe(e.pseudoBoard(this.board,this.convertCoordinates(i),this.convertCoordinates(s)),this.blackKing,this.flipped))return!1}else if(!e.isKingSafe(e.pseudoBoard(this.board,this.convertCoordinates(i),this.convertCoordinates(s)),this.convertCoordinates(s),this.flipped))return!1;return!0},isCheckmate:function(t){for(var i=0;i<8;i++)for(var s=0;s<8;s++)if(this.board[i][s]*this.board[t[0]][t[1]]>0)for(var o=0;o<8;o++)for(var r=0;r<8;r++){if(Math.abs(this.board[i][s])<9&&this.isValidMove(this.board[i][s],this.convertUIPosition([i,s]),this.convertUIPosition([o,r]))&&e.isKingSafe(e.pseudoBoard(this.board,[i,s],[o,r]),t,this.flipped))return!1;if(9==Math.abs(this.board[i][s])&&this.isValidMove(this.board[i][s],this.convertUIPosition([i,s]),this.convertUIPosition([o,r]))&&e.isKingSafe(e.pseudoBoard(this.board,[i,s],[o,r]),[o,r],this.flipped))return!1}return this.gameOver=!0,!e.isKingSafe(this.board,t,this.flipped)},isStalemate:function(t){for(var i=0;i<8;i++)for(var s=0;s<8;s++)if(this.board[i][s]*this.board[t[0]][t[1]]>0)for(var o=0;o<8;o++)for(var r=0;r<8;r++){if(Math.abs(this.board[i][s])<9&&this.isValidMove(this.board[i][s],this.convertUIPosition([i,s]),this.convertUIPosition([o,r]))&&e.isKingSafe(e.pseudoBoard(this.board,[i,s],[o,r]),t,this.flipped))return!1;if(9==Math.abs(this.board[i][s])&&this.isValidMove(this.board[i][s],this.convertUIPosition([i,s]),this.convertUIPosition([o,r]))&&e.isKingSafe(e.pseudoBoard(this.board,[i,s],[o,r]),[o,r],this.flipped))return!1}return this.gameOver=!0,e.isKingSafe(this.board,t,this.flipped)},isInsufficient:function(){for(var t=[],i=0;i<8;i++)for(var s=0;s<8;s++){var e=this.board[i][s];if(1==Math.abs(e)||5==Math.abs(e)||8==Math.abs(e))return!1;0!=e&&9!=Math.abs(e)&&t.push(e)}return!(t.length>2)&&(!(2==t.length&&t[0]*t[1]>4)&&(this.gameOver=!0,!0))},print:function(){for(var t=0;t<8;t++)console.log(this.board[t]);console.log("\n")}}).initialize(),i._RF.pop()}}}));

System.register("chunks:///_virtual/Bot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(o){var t,e,r,n,i,a,c,s;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,r=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){i=o.cclegacy,a=o._decorator,c=o.Component},function(o){s=o.BoardState}],execute:function(){var u,l,v;i._RF.push({},"759a7tV495BUrL3Wh1qncMG","Bot",void 0);var f=a.ccclass,p=a.property;o("Bot",f("Bot")((v=t((l=function(o){function t(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i))||this,r(t,"color",v,n(t)),t}e(t,o);var i=t.prototype;return i.onLoad=function(){1==this.color&&(s.flipped=!0)},i.chooseMove=function(){for(var o=[],t=[],e=0;e<8;e++)for(var r=0;r<8;r++)if(s.board[e][r]*s.turn>0)for(var n=0;n<8;n++)for(var i=0;i<8;i++)s.isValidMove(s.board[e][r],s.convertUIPosition([e,r]),s.convertUIPosition([n,i]))&&(o.push([e,r]),t.push([n,i]));if(0!=o.length){var a=Math.floor(Math.random()*o.length);s.nextBotMove[0]=o[a],s.nextBotMove[1]=t[a]}},i.update=function(o){if(!s.gameOver&&s.turn==this.color&&-1e3==s.promoting.x&&-1==s.nextBotMove[0][0]){if(this.chooseMove(),-1==s.nextBotMove[0][0])return void(s.gameOver=!0);this.schedule((function(){s.turn*=-1,s.moves+=1,s.justMoved=!0}),0,0,4)}},t}(c)).prototype,"color",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=l))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/BotPieceController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(e){var t,o,i,n,s,a,r,h,p,c,d,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,r=e.Vec3,h=e.resources,p=e.SpriteFrame,c=e.Sprite,d=e.UITransform,g=e.Component},function(e){m=e.BoardState}],execute:function(){var P,l,v,u;s._RF.push({},"638d9TvcVxEDpYIVqRiWmXd","BotPieceController",void 0);var B=a.ccclass,x=a.property;e("Bot",B("Bot")((v=t((l=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"pieceName",v,n(t)),t.prePieceName=0,t.piecePosition=new r,t.zerothPosition=new r,i(t,"lastPiece",u,n(t)),t}o(t,e);var s=t.prototype;return s.onLoad=function(){this.node.getPosition(this.zerothPosition),m.setBoard(this.pieceName,this.zerothPosition),9==this.pieceName?(m.whiteKing.push(m.convertCoordinates(this.zerothPosition)[0]),m.whiteKing.push(m.convertCoordinates(this.zerothPosition)[1])):-9==this.pieceName&&(m.blackKing.push(m.convertCoordinates(this.zerothPosition)[0]),m.blackKing.push(m.convertCoordinates(this.zerothPosition)[1])),this.lastPiece&&(m.lastPosition.x=this.zerothPosition.x,m.lastPosition.y=this.zerothPosition.y)},s.start=function(){},s.update=function(e){var t=this;if(this.node.getPosition(this.piecePosition),m.newGame&&(1==this.prePieceName?(h.load("art/whitepawn/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=44,this.getComponent(d).height=56,this.pieceName=1):-1==this.prePieceName&&(h.load("art/blackpawn/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=44,this.getComponent(d).height=56,this.pieceName=-1),this.prePieceName=0,this.node.setPosition(this.zerothPosition),this.piecePosition.x==m.lastPosition.x&&this.piecePosition.y==m.lastPosition.y&&(m.newGame=!1),this.node.getPosition(this.piecePosition)),-1e3!=this.piecePosition.x&&!(m.promoting.x>-1e3)){if(this.lastPiece&&this.node.getPosition(m.lastPosition),m.board[m.convertCoordinates(this.piecePosition)[0]][m.convertCoordinates(this.piecePosition)[1]]!=this.pieceName&&0!=m.board[m.convertCoordinates(this.piecePosition)[0]][m.convertCoordinates(this.piecePosition)[1]]&&this.node.setPosition(-1e3,-1e3,0),5==this.pieceName?(m.justCastled[0]&&this.piecePosition.x==m.leftEdge&&(this.node.setPosition(m.leftEdge+2*m.tileSize,m.topEdge,0),m.setBoard(0,new r(m.leftEdge,m.topEdge,0)),m.setBoard(5,new r(m.leftEdge+2*m.tileSize,m.topEdge,0))),m.justCastled[2]&&this.piecePosition.x==m.rightEdge&&(this.node.setPosition(m.rightEdge-3*m.tileSize,m.topEdge,0),m.setBoard(0,new r(m.rightEdge,m.topEdge,0)),m.setBoard(-5,new r(m.rightEdge-3*m.tileSize,m.topEdge,0)))):-5==this.pieceName&&(m.justCastled[1]&&this.piecePosition.x==m.rightEdge&&(this.node.setPosition(m.rightEdge-2*m.tileSize,m.topEdge,0),m.setBoard(0,new r(m.rightEdge,m.topEdge,0)),m.setBoard(-5,new r(m.rightEdge-2*m.tileSize,m.topEdge,0))),m.justCastled[3]&&this.piecePosition.x==m.leftEdge&&(this.node.setPosition(m.leftEdge+3*m.tileSize,m.topEdge,0),m.setBoard(0,new r(m.leftEdge,m.topEdge,0)),m.setBoard(-5,new r(m.leftEdge+3*m.tileSize,m.topEdge,0)))),1==Math.abs(this.pieceName)&&m.convertCoordinates(this.piecePosition)[0]==m.justPassed[0]&&m.convertCoordinates(this.piecePosition)[1]==m.justPassed[1])return m.setBoard(0,this.piecePosition),this.node.setPosition(-1e3,-1e3,0),void(m.justPassed=[-1,-1]);if(m.turn==-Math.sign(this.pieceName)&&m.nextBotMove[0][0]>-1&&m.convertCoordinates(this.piecePosition)[0]==m.nextBotMove[0][0]&&m.convertCoordinates(this.piecePosition)[1]==m.nextBotMove[0][1]){if(m.setBoard(0,this.piecePosition),m.setBoard(this.pieceName,m.convertUIPosition(m.nextBotMove[1])),9==this.pieceName?(m.castlingRights[0]=!1,m.castlingRights[2]=!1,m.whiteKing[0]=m.nextBotMove[1][0],m.whiteKing[1]=m.nextBotMove[1][1],m.nextBotMove[1][1]-m.nextBotMove[0][1]==2&&(m.justCastled[2]=!0),m.nextBotMove[0][1]-m.nextBotMove[1][1]==2&&(m.justCastled[0]=!0)):-9==this.pieceName&&(m.castlingRights[1]=!1,m.castlingRights[3]=!1,m.blackKing[0]=m.nextBotMove[1][0],m.blackKing[1]=m.nextBotMove[1][1],m.nextBotMove[1][1]-m.nextBotMove[0][1]==2&&(m.justCastled[1]=!0),m.nextBotMove[0][1]-m.nextBotMove[1][1]==2&&(m.justCastled[3]=!0)),5==this.pieceName?(0==m.nextBotMove[0][0]&&7==m.nextBotMove[0][1]&&(m.castlingRights[2]=!1),0==m.nextBotMove[0][0]&&0==m.nextBotMove[0][1]&&(m.castlingRights[0]=!1)):-5==this.pieceName&&(0==m.nextBotMove[0][0]&&7==m.nextBotMove[0][1]&&(m.castlingRights[1]=!1),0==m.nextBotMove[0][0]&&0==m.nextBotMove[0][1]&&(m.castlingRights[3]=!1)),1==this.pieceName)if(m.nextBotMove[1][0]-m.nextBotMove[0][0]==2?m.enPassant=m.nextBotMove[1]:(m.nextBotMove[1][0]-1==m.enPassant[0]&&m.nextBotMove[1][1]==m.enPassant[1]&&(m.justPassed[0]=m.enPassant[0],m.justPassed[1]=m.enPassant[1]),m.enPassant=[-1,-1]),0==m.nextBotMove[1][0]){m.piecePromoted=[8,5,3,2][Math.floor(4*Math.random())],8==m.piecePromoted?(h.load("art/whitequeen/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=65,this.getComponent(d).height=65):5==m.piecePromoted?(h.load("art/whiterook/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=48,this.getComponent(d).height=61):3==m.piecePromoted?(h.load("art/whitebishop/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=49,this.getComponent(d).height=67):2==m.piecePromoted&&(h.load("art/whiteknight/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=56,this.getComponent(d).height=65),this.prePieceName=this.pieceName,this.pieceName=m.piecePromoted,m.setBoard(this.pieceName,m.convertUIPosition(m.nextBotMove[1])),m.piecePromoted=0}else m.promoting.x=-1e3,m.promoting.y=-1e3;else if(-1==this.pieceName)if(m.nextBotMove[1][0]-m.nextBotMove[0][0]==2?m.enPassant=m.nextBotMove[1]:(m.nextBotMove[1][0]-1==m.enPassant[0]&&m.nextBotMove[1][1]==m.enPassant[1]&&(m.justPassed[0]=m.enPassant[0],m.justPassed[1]=m.enPassant[1]),m.enPassant=[-1,-1]),7==m.nextBotMove[1][0]){m.piecePromoted=[-8,-5,-3,-2][Math.floor(4*Math.random())],-8==m.piecePromoted?(h.load("art/blackqueen/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=65,this.getComponent(d).height=65):-5==m.piecePromoted?(h.load("art/blackrook/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=48,this.getComponent(d).height=61):-3==m.piecePromoted?(h.load("art/blackbishop/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=49,this.getComponent(d).height=67):-2==m.piecePromoted&&(h.load("art/blackknight/spriteFrame",p,(function(e,o){t.getComponent(c).spriteFrame=o})),this.getComponent(d).width=56,this.getComponent(d).height=65),this.prePieceName=this.pieceName,this.pieceName=m.piecePromoted,m.setBoard(this.pieceName,m.convertUIPosition(m.nextBotMove[1])),m.piecePromoted=0}else m.promoting.x=-1e3,m.promoting.y=-1e3;else m.enPassant=[-1,-1],m.promoting.x=-1e3,m.promoting.y=-1e3;this.node.setPosition(m.convertUIPosition(m.nextBotMove[1])),m.nextBotMove=[[-1,-1],[-1,-1]]}}},t}(g)).prototype,"pieceName",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=t(l.prototype,"lastPiece",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=l))||P);s._RF.pop()}}}));

System.register("chunks:///_virtual/ChangeScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(e){var n,t,o,c,r,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,c=e.director,r=e.Component},function(e){i=e.BoardState}],execute:function(){var a;t._RF.push({},"080abbr9ihOB4/DPVPN3dBy","ChangeScreen",void 0);var u=o.ccclass;o.property,e("opponentRedirect",u("opponentRedirect")(a=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.start=function(){},o.vsBot=function(){c.loadScene("Color")},o.vsPlayer=function(){i.disable=!1,c.loadScene("PvP")},o.vsBlackBot=function(){i.disable=!1,c.loadScene("PvBB")},o.vsWhiteBot=function(){i.disable=!1,c.loadScene("PvWB")},o.menu=function(){i.disable=!0,c.loadScene("Menu")},o.update=function(e){},t}(r))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(e){var t,r,i,n,a,s,o,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,o=e.Label,c=e.Component},function(e){u=e.BoardState}],execute:function(){var l,g,v,m,h;a._RF.push({},"2d2b1iBF/xOd5YlPszmixJc","GameOver",void 0);var p=s.ccclass,f=s.property;e("GameOver",(l=p("GameOver"),g=f(o),l((h=t((m=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(t,"gameOver",h,n(t)),t}r(t,e);var a=t.prototype;return a.start=function(){},a.update=function(e){u.justMoved&&(u.justMoved=!1,this.schedule((function(){1==u.turn?(u.isCheckmate(u.whiteKing)&&(this.gameOver.string="Black Won"),u.isStalemate(u.whiteKing)&&(this.gameOver.string="Draw")):-1==u.turn&&(u.isCheckmate(u.blackKing)&&(this.gameOver.string="White Won"),u.isStalemate(u.blackKing)&&(this.gameOver.string="Draw")),u.isInsufficient()&&(this.gameOver.string="Draw")}),0,6e3,.1)),u.moves>0&&u.gameOver?1==u.turn?this.gameOver.string="Black Won":this.gameOver.string="White Won":this.gameOver.string=""},t}(c)).prototype,"gameOver",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=m))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BoardOrientation.ts","./BoardSetup.ts","./BoardState.ts","./Bot.ts","./BotPieceController.ts","./ChangeScreen.ts","./GameOver.ts","./PawnPromotion.ts","./PieceController.ts","./PieceRules.ts","./TimerController.ts","./TimerOrientation.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PawnPromotion.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(i){var t,o,e,n,s,c,r,l,h,a,p,P;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,c=i._decorator,r=i.Vec3,l=i.input,h=i.Input,a=i.EventMouse,p=i.Component},function(i){P=i.BoardState}],execute:function(){var m,u,g;s._RF.push({},"47e55SSosBP8K7NYJSmfNiz","PawnPromotion",void 0);var y=c.ccclass,S=c.property;i("PawnPromotion",y("PawnPromotion")((g=t((u=function(i){function t(){for(var t,o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return t=i.call.apply(i,[this].concat(s))||this,e(t,"color",g,n(t)),t.isClicked=!1,t.clickPosition=new r,t}o(t,i);var s=t.prototype;return s.start=function(){l.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this),l.on(h.EventType.TOUCH_START,this.onTouchDown,this)},s.onMouseDown=function(i){i.getButton()==a.BUTTON_LEFT&&(this.clickPosition.x=i.getUILocation().x-6*P.tileSize,this.clickPosition.y=i.getUILocation().y-P.boardCenter,this.clickPosition.z=0,this.isClicked=!0)},s.onTouchDown=function(i){"touch-start"==i.getType()&&(this.clickPosition.x=i.getUILocation().x-6*P.tileSize,this.clickPosition.y=i.getUILocation().y-P.boardCenter,this.clickPosition.z=0,this.isClicked=!0)},s.update=function(i){P.promoting.x>-1e3?this.color==-1*P.turn?P.flipped?this.node.setPosition(new r(P.promoting.x,P.promoting.y+P.tileSize/2*3*this.color,0)):this.node.setPosition(new r(P.promoting.x,P.promoting.y-P.tileSize/2*3*this.color,0)):this.node.getPosition(this.clickPosition):this.node.setPosition(P.promoting),this.isClicked&&(!P.flipped&&1==this.color||P.flipped&&-1==this.color?Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y)<P.tileSize/2?P.piecePromoted=8*this.color:Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y+P.tileSize)<P.tileSize/2?P.piecePromoted=3*this.color:Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y+2*P.tileSize)<P.tileSize/2?P.piecePromoted=2*this.color:Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y+3*P.tileSize)<P.tileSize/2&&(P.piecePromoted=5*this.color):Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y-3*P.tileSize)<P.tileSize/2?P.piecePromoted=8*this.color:Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y-2*P.tileSize)<P.tileSize/2?P.piecePromoted=3*this.color:Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y-P.tileSize)<P.tileSize/2?P.piecePromoted=2*this.color:Math.abs(this.clickPosition.x-P.promoting.x)<P.tileSize/2&&Math.abs(this.clickPosition.y-P.promoting.y)<P.tileSize/2&&(P.piecePromoted=5*this.color),this.isClicked=!1)},t}(p)).prototype,"color",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=u))||m);s._RF.pop()}}}));

System.register("chunks:///_virtual/PieceController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(e){var i,t,o,s,n,h,r,p,c,a,d,P,g,l,m,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,h=e._decorator,r=e.Vec3,p=e.input,c=e.Input,a=e.EventMouse,d=e.resources,P=e.SpriteFrame,g=e.Sprite,l=e.UITransform,m=e.Component},function(e){u=e.BoardState}],execute:function(){var E,C,f,y;n._RF.push({},"aa354qviLdIJY6cSRWtcelP","PieceController",void 0);var x=h.ccclass,w=h.property;e("PieceController",x("PieceController")((f=i((C=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),h=0;h<t;h++)n[h]=arguments[h];return i=e.call.apply(e,[this].concat(n))||this,o(i,"pieceName",f,s(i)),i.prePieceName=0,i.piecePosition=new r,i.prePiecePosition=new r,i.zerothPosition=new r,i.clickPosition=new r(-1e3,-1e3,0),i.cursorPosition=new r,i.isDragged=!1,i.isReleased=!1,o(i,"lastPiece",y,s(i)),i}t(i,e);var n=i.prototype;return n.onLoad=function(){this.node.getPosition(this.prePiecePosition),this.node.getPosition(this.zerothPosition),u.setBoard(this.pieceName,this.prePiecePosition),9==this.pieceName?(u.whiteKing.push(u.convertCoordinates(this.prePiecePosition)[0]),u.whiteKing.push(u.convertCoordinates(this.prePiecePosition)[1])):-9==this.pieceName&&(u.blackKing.push(u.convertCoordinates(this.prePiecePosition)[0]),u.blackKing.push(u.convertCoordinates(this.prePiecePosition)[1])),this.lastPiece&&(u.lastPosition.x=this.prePiecePosition.x,u.lastPosition.y=this.prePiecePosition.y)},n.start=function(){p.on(c.EventType.MOUSE_DOWN,this.onMouseDown,this),p.on(c.EventType.MOUSE_MOVE,this.onMouseMove,this),p.on(c.EventType.MOUSE_UP,this.onMouseUp,this),p.on(c.EventType.TOUCH_START,this.onTouchDown,this),p.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(c.EventType.TOUCH_END,this.onTouchUp,this)},n.onMouseDown=function(e){e.getButton()==a.BUTTON_LEFT&&(this.clickPosition.x=e.getUILocation().x-6*u.tileSize,this.clickPosition.y=e.getUILocation().y-u.boardCenter,this.clickPosition.z=0)},n.onMouseMove=function(e){e.getButton()==a.BUTTON_LEFT&&(this.cursorPosition.x=e.getUILocation().x-6*u.tileSize,this.cursorPosition.y=e.getUILocation().y-u.boardCenter,this.cursorPosition.z=0,Math.abs(this.clickPosition.x-this.piecePosition.x)<u.tileSize/2&&Math.abs(this.clickPosition.y-this.piecePosition.y)<u.tileSize/2&&(this.isDragged=!0))},n.onMouseUp=function(e){e.getButton()==a.BUTTON_LEFT&&(this.isReleased=!0)},n.onTouchDown=function(e){"touch-start"==e.getType()&&(this.clickPosition.x=e.getUILocation().x-6*u.tileSize,this.clickPosition.y=e.getUILocation().y-u.boardCenter,this.clickPosition.z=0)},n.onTouchMove=function(e){"touch-move"==e.getType()&&(this.cursorPosition.x=e.getUILocation().x-6*u.tileSize,this.cursorPosition.y=e.getUILocation().y-u.boardCenter,this.cursorPosition.z=0,Math.abs(this.clickPosition.x-this.piecePosition.x)<u.tileSize/2&&Math.abs(this.clickPosition.y-this.piecePosition.y)<u.tileSize/2&&(this.isDragged=!0))},n.onTouchUp=function(e){"touch-end"==e.getType()&&(this.isReleased=!0)},n.adjustCoordinate=function(e){e.x=Math.floor(e.x/u.tileSize)*u.tileSize+u.tileSize/2,e.y=Math.floor(e.y/u.tileSize)*u.tileSize+u.tileSize/2},n.update=function(e){var i=this;if(this.node.getPosition(this.piecePosition),u.newGame&&(1==this.prePieceName?(d.load("art/whitepawn/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=44,this.getComponent(l).height=56,this.pieceName=1):-1==this.prePieceName&&(d.load("art/blackpawn/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=44,this.getComponent(l).height=56,this.pieceName=-1),this.prePieceName=0,this.node.setPosition(this.zerothPosition),this.piecePosition.x==u.lastPosition.x&&this.piecePosition.y==u.lastPosition.y&&(u.newGame=!1),this.node.getPosition(this.piecePosition),this.node.getPosition(this.prePiecePosition)),-1e3!=this.piecePosition.x&&(u.flip&&(this.node.setPosition(u.leftEdge+u.rightEdge-this.piecePosition.x,u.topEdge+u.bottomEdge-this.piecePosition.y,0),this.piecePosition.x==u.lastPosition.x&&this.piecePosition.y==u.lastPosition.y&&(u.flip=!1,u.flipped=!u.flipped),this.node.getPosition(this.piecePosition),this.node.getPosition(this.prePiecePosition)),!(u.promoting.x>-1e3))){if(Math.abs(this.piecePosition.x)%u.tileSize==u.tileSize/2&&Math.abs(this.piecePosition.y)%u.tileSize==u.tileSize/2&&(this.lastPiece&&this.node.getPosition(u.lastPosition),u.board[u.convertCoordinates(this.piecePosition)[0]][u.convertCoordinates(this.piecePosition)[1]]!=this.pieceName&&0!=u.board[u.convertCoordinates(this.piecePosition)[0]][u.convertCoordinates(this.piecePosition)[1]]&&this.node.setPosition(-1e3,-1e3,0),u.flipped?5==this.pieceName?(u.justCastled[0]&&this.prePiecePosition.x==u.leftEdge&&(this.node.setPosition(u.leftEdge+2*u.tileSize,u.topEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.leftEdge,u.topEdge,0)),u.setBoard(5,new r(u.leftEdge+2*u.tileSize,u.topEdge,0)),u.justCastled[0]=!1),u.justCastled[2]&&this.prePiecePosition.x==u.rightEdge&&(this.node.setPosition(u.rightEdge-3*u.tileSize,u.topEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.rightEdge,u.topEdge,0)),u.setBoard(5,new r(u.rightEdge-3*u.tileSize,u.topEdge,0)),u.justCastled[2]=!1)):-5==this.pieceName&&(u.justCastled[1]&&this.prePiecePosition.x==u.leftEdge&&(this.node.setPosition(u.leftEdge+2*u.tileSize,u.bottomEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.leftEdge,u.bottomEdge,0)),u.setBoard(-5,new r(u.leftEdge+2*u.tileSize,u.bottomEdge,0)),u.justCastled[1]=!1),u.justCastled[3]&&this.prePiecePosition.x==u.rightEdge&&(this.node.setPosition(u.rightEdge-3*u.tileSize,u.bottomEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.rightEdge,u.bottomEdge,0)),u.setBoard(-5,new r(u.rightEdge-3*u.tileSize,u.bottomEdge,0)),u.justCastled[3]=!1)):5==this.pieceName?(u.justCastled[0]&&this.prePiecePosition.x==u.rightEdge&&(this.node.setPosition(u.rightEdge-2*u.tileSize,u.bottomEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.rightEdge,u.bottomEdge,0)),u.setBoard(5,new r(u.rightEdge-2*u.tileSize,u.bottomEdge,0)),u.justCastled[0]=!1),u.justCastled[2]&&this.prePiecePosition.x==u.leftEdge&&(this.node.setPosition(u.leftEdge+3*u.tileSize,u.bottomEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.leftEdge,u.bottomEdge,0)),u.setBoard(5,new r(u.leftEdge+3*u.tileSize,u.bottomEdge,0)),u.justCastled[2]=!1)):-5==this.pieceName&&(u.justCastled[1]&&this.prePiecePosition.x==u.rightEdge&&(this.node.setPosition(u.rightEdge-2*u.tileSize,u.topEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.rightEdge,u.topEdge,0)),u.setBoard(-5,new r(u.rightEdge-2*u.tileSize,u.topEdge,0)),u.justCastled[1]=!1),u.justCastled[3]&&this.prePiecePosition.x==u.leftEdge&&(this.node.setPosition(u.leftEdge+3*u.tileSize,u.topEdge,0),this.node.getPosition(this.prePiecePosition),u.setBoard(0,new r(u.leftEdge,u.topEdge,0)),u.setBoard(-5,new r(u.leftEdge+3*u.tileSize,u.topEdge,0)),u.justCastled[3]=!1)),1==Math.abs(this.pieceName)&&u.convertCoordinates(this.piecePosition)[0]==u.justPassed[0]&&u.convertCoordinates(this.piecePosition)[1]==u.justPassed[1]))return u.setBoard(0,this.piecePosition),this.node.setPosition(-1e3,-1e3,0),void(u.justPassed=[-1,-1]);if(this.isDragged&&(this.node.setPosition(this.cursorPosition),this.isReleased&&(this.isDragged=!1)),this.isReleased){if(this.adjustCoordinate(this.piecePosition),u.isValidMove(this.pieceName,this.prePiecePosition,this.piecePosition)){if(u.moves+=1,u.justMoved=!0,u.setBoard(0,this.prePiecePosition),u.setBoard(this.pieceName,this.piecePosition),u.turn*=-1,9==this.pieceName?(u.castlingRights[0]=!1,u.castlingRights[2]=!1,u.whiteKing[0]=u.convertCoordinates(this.piecePosition)[0],u.whiteKing[1]=u.convertCoordinates(this.piecePosition)[1],this.piecePosition.x-this.prePiecePosition.x==2*u.tileSize&&(u.flipped?u.justCastled[2]=!0:u.justCastled[0]=!0),this.prePiecePosition.x-this.piecePosition.x==2*u.tileSize&&(u.flipped?u.justCastled[0]=!0:u.justCastled[2]=!0)):-9==this.pieceName&&(u.castlingRights[1]=!1,u.castlingRights[3]=!1,u.blackKing[0]=u.convertCoordinates(this.piecePosition)[0],u.blackKing[1]=u.convertCoordinates(this.piecePosition)[1],this.piecePosition.x-this.prePiecePosition.x==2*u.tileSize&&(u.flipped?u.justCastled[3]=!0:u.justCastled[1]=!0),this.prePiecePosition.x-this.piecePosition.x==2*u.tileSize&&(u.flipped?u.justCastled[1]=!0:u.justCastled[3]=!0)),5==this.pieceName?!u.flipped&&this.piecePosition.x==u.rightEdge&&this.piecePosition.y==u.bottomEdge||u.flipped&&this.piecePosition.x==u.leftEdge&&this.piecePosition.y==u.topEdge?u.castlingRights[0]=!1:(!u.flipped&&this.piecePosition.x==u.leftEdge&&this.piecePosition.y==u.bottomEdge||u.flipped&&this.piecePosition.x==u.rightEdge&&this.piecePosition.y==u.topEdge)&&(u.castlingRights[2]=!1):-5==this.pieceName&&(!u.flipped&&this.piecePosition.x==u.rightEdge&&this.piecePosition.y==u.topEdge||u.flipped&&this.piecePosition.x==u.leftEdge&&this.piecePosition.y==u.bottomEdge?u.castlingRights[1]=!1:(!u.flipped&&this.piecePosition.x==u.leftEdge&&this.piecePosition.y==u.topEdge||u.flipped&&this.piecePosition.x==u.rightEdge&&this.piecePosition.y==u.bottomEdge)&&(u.castlingRights[3]=!1)),1==Math.abs(this.pieceName))if(Math.abs(this.piecePosition.y-this.prePiecePosition.y)==2*u.tileSize?u.enPassant=u.convertCoordinates(this.piecePosition):((!u.flipped&&u.convertCoordinates(this.piecePosition)[0]+this.pieceName==u.enPassant[0]&&u.convertCoordinates(this.piecePosition)[1]==u.enPassant[1]||u.flipped&&u.convertCoordinates(this.piecePosition)[0]-this.pieceName==u.enPassant[0]&&u.convertCoordinates(this.piecePosition)[1]==u.enPassant[1])&&(u.justPassed[0]=u.enPassant[0],u.justPassed[1]=u.enPassant[1]),u.enPassant=[-1,-1]),0==u.convertCoordinates(this.piecePosition)[0]||7==u.convertCoordinates(this.piecePosition)[0]){u.promoting.x=this.piecePosition.x,u.promoting.y=this.piecePosition.y;this.schedule((function e(){var i=this;0!=u.piecePromoted&&(8==u.piecePromoted?(d.load("art/whitequeen/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=65,this.getComponent(l).height=65):-8==u.piecePromoted?(d.load("art/blackqueen/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=65,this.getComponent(l).height=65):5==u.piecePromoted?(d.load("art/whiterook/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=48,this.getComponent(l).height=61):-5==u.piecePromoted?(d.load("art/blackrook/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=48,this.getComponent(l).height=61):3==u.piecePromoted?(d.load("art/whitebishop/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=49,this.getComponent(l).height=67):-3==u.piecePromoted?(d.load("art/blackbishop/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=49,this.getComponent(l).height=67):2==u.piecePromoted?(d.load("art/whiteknight/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=56,this.getComponent(l).height=65):-2==u.piecePromoted&&(d.load("art/blackknight/spriteFrame",P,(function(e,t){i.getComponent(g).spriteFrame=t})),this.getComponent(l).width=56,this.getComponent(l).height=65),u.promoting=new r(-1e3,-1e3,0),this.prePieceName=this.pieceName,this.pieceName=u.piecePromoted,u.setBoard(this.pieceName,this.piecePosition),u.piecePromoted=0,this.unschedule(e))}),e,2e9)}else u.promoting.x=-1e3,u.promoting.y=-1e3;else u.enPassant=[-1,-1],u.promoting.x=-1e3,u.promoting.y=-1e3;this.node.setPosition(this.piecePosition),this.node.getPosition(this.prePiecePosition)}else this.node.setPosition(this.prePiecePosition);this.isReleased=!1}}},i}(m)).prototype,"pieceName",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=i(C.prototype,"lastPiece",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=C))||E);n._RF.pop()}}}));

System.register("chunks:///_virtual/PieceRules.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"2ac9cn8uONAQ5276CfvkNYk","PieceRules",void 0);i("PieceRules",{pseudoBoard:function(i,e,r){for(var t=[],n=0;n<i.length;n++){for(var f=[],s=0;s<i[n].length;s++)f.push(i[n][s]);t.push(f)}return t[r[0]][r[1]]=t[e[0]][e[1]],t[e[0]][e[1]]=0,t},isKingSafe:function(i,e,r){for(var t=Math.sign(i[e[0]][e[1]]),n=0;n<8;n++)for(var f=0;f<8;f++)if(i[n][f]==-9*t){if(this.isReachableByKing(i,[n,f],e,[!1,!1,!1,!1],r))return!1}else if(i[n][f]==-8*t){if(this.isReachableByQueen(i,[n,f],e))return!1}else if(i[n][f]==-5*t){if(this.isReachableByRook(i,[n,f],e))return!1}else if(i[n][f]==-3*t){if(this.isReachableByBishop(i,[n,f],e))return!1}else if(i[n][f]==-2*t){if(this.isReachableByKnight([n,f],e))return!1}else if(i[n][f]==-1*t&&this.isReachableByPawn(i,[n,f],e,r)&&1==Math.abs(f-e[1]))return!1;return!0},isReachableByKing:function(i,e,r,t,n){if(Math.abs(e[0]-r[0])>1)return!1;if(Math.abs(e[1]-r[1])>2)return!1;if(2==Math.abs(e[1]-r[1])){if(e[0]!=r[0])return!1;if(n)if(i[e[0]][e[1]]>0){if(!t[0]&&!t[2])return!1;if(!this.isKingSafe(i,[0,3],n))return!1;if(e[1]>r[1]){if(!t[0])return!1;if(5!=i[0][0])return!1;if(0!=i[0][2]||0!=i[0][1])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[0,3],[0,2]),[0,2],n))return!1}else{if(!t[2])return!1;if(5!=i[0][7])return!1;if(0!=i[0][4]||0!=i[0][5]||0!=i[0][6])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[0,3],[0,4]),[0,4],n))return!1}}else{if(!t[1]&&!t[3])return!1;if(!this.isKingSafe(i,[7,3],n))return!1;if(e[1]>r[1]){if(!t[1])return!1;if(-5!=i[7][0])return!1;if(0!=i[7][2]||0!=i[7][1])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[7,3],[7,2]),[7,2],n))return!1}else{if(!t[3])return!1;if(-5!=i[7][7])return!1;if(0!=i[7][4]||0!=i[7][5]||0!=i[7][6])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[7,3],[7,4]),[7,4],n))return!1}}else if(i[e[0]][e[1]]>0){if(!t[0]&&!t[2])return!1;if(!this.isKingSafe(i,[7,4],n))return!1;if(e[1]<r[1]){if(!t[0])return!1;if(5!=i[7][7])return!1;if(0!=i[7][5]||0!=i[7][6])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[7,4],[7,5]),[7,5],n))return!1}else{if(!t[2])return!1;if(5!=i[7][0])return!1;if(0!=i[7][1]||0!=i[7][2]||0!=i[7][3])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[7,4],[7,3]),[7,3],n))return!1}}else{if(!t[1]&&!t[3])return!1;if(!this.isKingSafe(i,[0,4],n))return!1;if(e[1]<r[1]){if(!t[1])return!1;if(-5!=i[0][7])return!1;if(0!=i[0][5]||0!=i[0][6])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[0,4],[0,5]),[0,5],n))return!1}else{if(!t[3])return!1;if(-5!=i[0][0])return!1;if(0!=i[0][1]||0!=i[0][2]||0!=i[0][3])return!1;if(!this.isKingSafe(this.pseudoBoard(i,[0,4],[0,3]),[0,3],n))return!1}}}return!0},isReachableByRook:function(i,e,r){if(e[0]!=r[0]&&e[1]!=r[1])return!1;if(e[0]==r[0])for(var t=Math.min(e[1],r[1])+1;t<Math.max(e[1],r[1]);t++)if(0!=i[e[0]][t])return!1;if(e[1]==r[1])for(var n=Math.min(e[0],r[0])+1;n<Math.max(e[0],r[0]);n++)if(0!=i[n][e[1]])return!1;return!0},isReachableByBishop:function(i,e,r){var t=Math.abs(e[0]-r[0]);if(t!=Math.abs(e[1]-r[1]))return!1;if((e[0]-r[0])*(e[1]-r[1])>0){for(var n=1;n<t;n++)if(0!=i[Math.min(e[0],r[0])+n][Math.min(e[1],r[1])+n])return!1}else for(var f=1;f<t;f++)if(0!=i[Math.min(e[0],r[0])+f][Math.max(e[1],r[1])-f])return!1;return!0},isReachableByQueen:function(i,e,r){return this.isReachableByRook(i,e,r)||this.isReachableByBishop(i,e,r)},isReachableByKnight:function(i,e){return 3==Math.abs(i[0]-e[0])+Math.abs(i[1]-e[1])&&(i[0]!=e[0]&&i[1]!=e[1])},isReachableByPawn:function(i,e,r,t){if(Math.abs(e[1]-r[1])>1)return!1;if(1==Math.abs(e[1]-r[1]))return!(!t&&(e[0]-r[0])*i[e[0]][e[1]]!=1)&&((!t||(e[0]-r[0])*i[e[0]][e[1]]==-1)&&0!=i[r[0]][r[1]]);if(0!=i[r[0]][r[1]])return!1;if(i[e[0]][e[1]]>0&&!t||i[e[0]][e[1]]<0&&t)if(e[0]<6){if(e[0]-r[0]!=1)return!1}else{if(e[0]-r[0]!=1&&e[0]-r[0]!=2)return!1;if(0!=i[5][e[1]])return!1}else if(e[0]>1){if(r[0]-e[0]!=1)return!1}else{if(r[0]-e[0]!=1&&r[0]-e[0]!=2)return!1;if(0!=i[2][e[1]])return!1}return!0}});e._RF.pop()}}}));

System.register("chunks:///_virtual/TimerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(t){var e,n,r,o,i,s,c,a,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,c=t.Label,a=t.CCInteger,l=t.Component},function(t){u=t.BoardState}],execute:function(){var m,h,p,f,g,d,S,v;i._RF.push({},"7211a8sjS5BlImK0fbghEIM","TimerController",void 0);var I=s.ccclass,b=s.property;t("TimerController",(m=I("TimerController"),h=b(c),p=b(a),m((d=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,r(e,"timer",d,o(e)),r(e,"timeInSeconds",S,o(e)),r(e,"color",v,o(e)),e}n(e,t);var i=e.prototype;return i.start=function(){this.startCountDown()},i.convertToMinutes=function(t){return t%60>9?Math.floor(t/60).toString()+":"+(t%60).toString():Math.floor(t/60).toString()+":0"+(t%60).toString()},i.startCountDown=function(){this.timer.string=this.convertToMinutes(this.timeInSeconds);this.schedule((function(){(u.turn==this.color&&-1e3==u.promoting.x&&u.moves>1&&!u.gameOver&&this.timeInSeconds>0||u.turn==-this.color&&u.promoting.x>-1e3&&u.moves>1&&!u.gameOver&&this.timeInSeconds>0)&&this.timeInSeconds--,this.timer.string=this.convertToMinutes(this.timeInSeconds),0==this.timeInSeconds&&(u.gameOver=!0)}),1)},i.update=function(t){0==u.moves&&(this.timeInSeconds=600)},e}(l)).prototype,"timer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(g.prototype,"timeInSeconds",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=e(g.prototype,"color",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=g))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/TimerOrientation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardState.ts"],(function(t){var i,e,o,n,r,s,a,c,p,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Vec3,c=t.Sprite,p=t.Button,l=t.Component},function(t){u=t.BoardState}],execute:function(){var h,m,d;r._RF.push({},"7c2e6U4hMhISaY82RU3ysdy","TimerOrientation",void 0);var f=s.ccclass,g=s.property;t("TimerOrientation",f("TimerOrientation")((d=i((m=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"color",d,n(i)),i.timerPosition=new a,i}e(i,t);var r=i.prototype;return r.onLoad=function(){this.node.getPosition(this.timerPosition)},r.start=function(){},r.update=function(t){u.flipped?this.node.setPosition(this.timerPosition.x,this.timerPosition.y+6*u.tileSize*this.color,0):this.node.setPosition(this.timerPosition),u.turn==this.color&&-1e3==u.promoting.x||u.turn==-this.color&&u.promoting.x>-1e3?this.getComponent(c).spriteFrame=this.getComponent(p).disabledSprite:this.getComponent(c).spriteFrame=this.getComponent(p).pressedSprite},i}(l)).prototype,"color",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=m))||h);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});